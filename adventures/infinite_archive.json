{
  "title": "SagaCraft: The Infinite Archive",
  "author": "SagaCraft Team",
  "intro": "You arrive at the Infinite Archive, a living library that binds every story ever told. Vaults, workshops, and hidden gardens weave together in impossible geometry. Archivists whisper of a sealed sanctum where the master codex lies. Can you restore the Archive and claim the codex before its memory fades?",
  "start_room": 1,
  "settings": {
    "allow_save": true,
    "difficulty": "classic",
    "enable_magic": true,
    "enable_puzzles": true,
    "enable_combat_xp": true
  },
  "rooms": [
    {
      "id": 1,
      "name": "Starlit Landing",
      "description": "A glass platform hangs over a sea of stars. A maintenance lift hums softly while a friendly scout waits by a supply crate.",
      "exits": {"north": 2, "east": 3},
      "light_level": "bright",
      "is_safe_zone": true,
      "ambient_sound": "Distant chimes echo across the void."
    },
    {
      "id": 2,
      "name": "Grand Rotunda",
      "description": "A circular hall of polished obsidian. Murals depict legendary quests and branching timelines.",
      "exits": {"south": 1, "east": 4, "north": 5, "west": 6},
      "light_level": "normal",
      "ambient_sound": "Footsteps and low conversation carry through the dome."
    },
    {
      "id": 3,
      "name": "Dockside Market",
      "description": "A row of makeshift stalls bursting with gear. Quartermaster Dex haggles cheerfully with anyone who approaches.",
      "exits": {"west": 1, "north": 4, "east": 7},
      "light_level": "bright",
      "environmental_effects": ["trading_discount"]
    },
    {
      "id": 4,
      "name": "Scriptorium Walk",
      "description": "Long tables hold quills that write on their own. A mosaic floor hides seams that hint at secret mechanisms.",
      "exits": {"west": 2, "south": 3, "north": 8, "east": 9},
      "light_level": "normal",
      "has_trap": true,
      "trap_damage": 3,
      "ambient_sound": "Scratching quills and the soft click of rotating tiles."
    },
    {
      "id": 5,
      "name": "Lantern Workshop",
      "description": "Shelves brim with lenses, oils, and focusing crystals. A master lantern hangs half-finished above a workbench.",
      "exits": {"south": 2, "east": 10},
      "light_level": "bright",
      "hidden_items": [6],
      "items_revealed": false
    },
    {
      "id": 6,
      "name": "Service Conduit",
      "description": "Narrow ductwork lined with pipes and rune conduits. The air is warm and metallic.",
      "exits": {"east": 2, "north": 11, "west": 12},
      "light_level": "dim",
      "ambient_sound": "Steam hisses in irregular bursts."
    },
    {
      "id": 7,
      "name": "Whispering Garden",
      "description": "Trees of glass and ink whisper lines of forgotten poetry. Wind chimes made of copper rings sing softly.",
      "exits": {"west": 3, "north": 9, "east": 13},
      "light_level": "normal",
      "environmental_effects": ["focus_regen"],
      "hidden_items": [12],
      "items_revealed": false
    },
    {
      "id": 8,
      "name": "Vault Antechamber",
      "description": "An armored door bars the path. A key slot glows beside it, and sigils watch for intruders.",
      "exits": {"south": 4, "north": 14, "east": 10},
      "light_level": "dim",
      "requires_light_source": false
    },
    {
      "id": 9,
      "name": "Debate Hall",
      "description": "Tiered seating surrounds a central dais. Holographic debaters rehearse cases about adventure design.",
      "exits": {"west": 4, "south": 7, "north": 15},
      "light_level": "normal",
      "ambient_sound": "Measured voices argue with impeccable logic."
    },
    {
      "id": 10,
      "name": "Tinkerer's Loft",
      "description": "Tools and gears float midair, assembling prototypes. A coded lock guards a side hatch.",
      "exits": {"west": 8, "south": 5, "east": 16},
      "light_level": "bright",
      "environmental_effects": ["crafting_bonus"]
    },
    {
      "id": 11,
      "name": "Shadow Gallery",
      "description": "Portraits of past champions loom in darkness. Without light, the corridor is treacherous.",
      "exits": {"south": 6, "east": 14},
      "light_level": "dark",
      "requires_light_source": true,
      "has_trap": true,
      "trap_damage": 6
    },
    {
      "id": 12,
      "name": "Flooded Archive",
      "description": "Water laps at knee height, reflecting a ceiling of constellations. Something coils beneath the surface.",
      "exits": {"east": 6, "north": 13},
      "light_level": "dim",
      "environmental_effects": ["movement_slow"]
    },
    {
      "id": 13,
      "name": "Observatory Bridge",
      "description": "A narrow bridge crosses the open stacks. A holofox darts between railings, curious and quick.",
      "exits": {"west": 12, "south": 7, "north": 16},
      "light_level": "normal",
      "ambient_sound": "Wind whistles through the rafters."
    },
    {
      "id": 14,
      "name": "Puzzle Gate",
      "description": "A vaulted chamber covered in shifting glyphs. A bronze guardian watches silently.",
      "exits": {"south": 8, "west": 11, "north": 15},
      "light_level": "dim",
      "has_trap": true,
      "trap_damage": 8
    },
    {
      "id": 15,
      "name": "Memory Forge",
      "description": "An anvil of light hovers above a pit of codefire. Fragmented memories spin in rings.",
      "exits": {"south": 9, "north": 17, "west": 14},
      "light_level": "normal",
      "environmental_effects": ["xp_boost"]
    },
    {
      "id": 16,
      "name": "Infinite Stacks",
      "description": "A labyrinth of shelves spiraling upward. Ladders realign themselves as you move.",
      "exits": {"west": 10, "south": 13, "north": 18},
      "light_level": "dim",
      "alternate_description": "The stacks glow with runes after the sequence is set.",
      "condition_for_alternate": "sequence_solved"
    },
    {
      "id": 17,
      "name": "Curator's Reach",
      "description": "A long hall lined with memory crystals. The air hums with protective wards.",
      "exits": {"south": 15},
      "light_level": "bright",
      "ambient_sound": "A deep, resonant chord vibrates continuously."
    },
    {
      "id": 18,
      "name": "Orrery of Endings",
      "description": "The final chamber: a starfield of spinning codices orbiting a central codex pedestal.",
      "exits": {"south": 16},
      "light_level": "bright",
      "is_safe_zone": false,
      "ambient_sound": "Gears click in time with a distant heartbeat."
    }
  ],
  "items": [
    {
      "id": 1,
      "name": "brass lantern",
      "description": "A reliable lantern fitted with crystal lenses.",
      "type": "normal",
      "weight": 1,
      "value": 25,
      "location": 5,
      "on_use_effect": "provides_light",
      "durability": 60,
      "max_durability": 60
    },
    {
      "id": 2,
      "name": "archivist's blade",
      "description": "A balanced short blade etched with rune lines for stability.",
      "type": "weapon",
      "weight": 4,
      "value": 120,
      "is_weapon": true,
      "weapon_type": 1,
      "weapon_dice": 2,
      "weapon_sides": 6,
      "can_be_equipped": true,
      "equipment_slot": "weapon",
      "magical_bonus": 2
    },
    {
      "id": 3,
      "name": "woven armor vest",
      "description": "Light armor braided from wire and silk.",
      "type": "armor",
      "weight": 6,
      "value": 90,
      "is_armor": true,
      "armor_value": 3,
      "can_be_equipped": true,
      "equipment_slot": "armor"
    },
    {
      "id": 4,
      "name": "field satchel",
      "description": "A rugged satchel with hidden pockets.",
      "type": "container",
      "weight": 2,
      "value": 35,
      "location": 1,
      "is_container": true,
      "container_capacity": 6,
      "contains_items": [5]
    },
    {
      "id": 5,
      "name": "ration pack",
      "description": "Dried fruit, nuts, and a restorative tonic.",
      "type": "edible",
      "weight": 1,
      "value": 10,
      "location": 0,
      "on_use_effect": "heal_small"
    },
    {
      "id": 6,
      "name": "vault key",
      "description": "A crystalline key cut to match the vault sigils.",
      "type": "normal",
      "weight": 1,
      "value": 50,
      "location": 5,
      "is_key": true,
      "unlocks_puzzle": 1,
      "is_quest_item": true,
      "quest_id": 2
    },
    {
      "id": 7,
      "name": "cipher tablet",
      "description": "A tablet that cycles through ciphers; it hints at a combination.",
      "type": "readable",
      "weight": 2,
      "value": 30,
      "location": 2
    },
    {
      "id": 8,
      "name": "resonant chime",
      "description": "A copper chime that reveals hidden things when struck.",
      "type": "normal",
      "weight": 1,
      "value": 45,
      "location": 7,
      "on_use_effect": "reveal_secret"
    },
    {
      "id": 9,
      "name": "lockpick set",
      "description": "Picks and shims in a velvet roll.",
      "type": "normal",
      "weight": 1,
      "value": 60,
      "location": 6,
      "special_abilities": ["disarm_trap"]
    },
    {
      "id": 10,
      "name": "healing tonic",
      "description": "A vial that knits wounds and clears the mind.",
      "type": "drinkable",
      "weight": 1,
      "value": 35,
      "location": 3,
      "on_use_effect": "heal_medium"
    },
    {
      "id": 11,
      "name": "light crystal",
      "description": "A shard that stores light for dark halls.",
      "type": "normal",
      "weight": 1,
      "value": 40,
      "location": 11,
      "on_use_effect": "temporary_light"
    },
    {
      "id": 12,
      "name": "holofox treat",
      "description": "A sweet wafer beloved by curious holofoxes.",
      "type": "edible",
      "weight": 1,
      "value": 15,
      "location": 7,
      "is_quest_item": true,
      "quest_id": 3
    },
    {
      "id": 13,
      "name": "memory shard",
      "description": "A crystal holding a fragmented memory of the Archive.",
      "type": "normal",
      "weight": 1,
      "value": 0,
      "location": 15,
      "is_quest_item": true,
      "quest_id": 4
    },
    {
      "id": 14,
      "name": "sequence rod",
      "description": "A rod that records rhythmic pulses.",
      "type": "normal",
      "weight": 1,
      "value": 55,
      "location": 10,
      "on_use_effect": "sequence_hint"
    },
    {
      "id": 15,
      "name": "codex fragment",
      "description": "A page torn from the master codex.",
      "type": "normal",
      "weight": 1,
      "value": 0,
      "location": 18,
      "is_quest_item": true,
      "quest_id": 5
    },
    {
      "id": 16,
      "name": "guardian badge",
      "description": "An insignia taken from a defeated guardian.",
      "type": "normal",
      "weight": 1,
      "value": 0,
      "location": 0,
      "is_quest_item": true,
      "quest_id": 4
    },
    {
      "id": 17,
      "name": "inkglass staff",
      "description": "A staff that amplifies focus and parries blows.",
      "type": "weapon",
      "weight": 5,
      "value": 140,
      "is_weapon": true,
      "weapon_type": 2,
      "weapon_dice": 3,
      "weapon_sides": 6,
      "can_be_equipped": true,
      "equipment_slot": "weapon",
      "magical_bonus": 1
    },
    {
      "id": 18,
      "name": "phase cloak",
      "description": "A cloak that blurs the wearer at the edges.",
      "type": "armor",
      "weight": 3,
      "value": 160,
      "is_armor": true,
      "armor_value": 4,
      "can_be_equipped": true,
      "equipment_slot": "armor",
      "special_abilities": ["evasion"]
    },
    {
      "id": 19,
      "name": "gearheart core",
      "description": "A humming power core from a guardian.",
      "type": "normal",
      "weight": 2,
      "value": 0,
      "location": 0,
      "is_quest_item": true,
      "quest_id": 2
    },
    {
      "id": 20,
      "name": "archive map",
      "description": "A map that updates with visited rooms.",
      "type": "readable",
      "weight": 1,
      "value": 20,
      "location": 1
    }
  ],
  "monsters": [
    {
      "id": 1,
      "name": "Archivist Lyra",
      "description": "A calm librarian who remembers every path.",
      "room_id": 2,
      "hardiness": 40,
      "agility": 16,
      "friendliness": "friendly",
      "courage": 80,
      "gold": 0,
      "dialogue_id": 1,
      "can_trade": false,
      "gives_quests": [1],
      "reaction_level": 30,
      "special_abilities": ["knowledge_pool"],
      "ai_behavior": "stationary"
    },
    {
      "id": 2,
      "name": "Quartermaster Dex",
      "description": "An energetic merchant who arms explorers.",
      "room_id": 3,
      "hardiness": 35,
      "agility": 14,
      "friendliness": "friendly",
      "courage": 70,
      "gold": 200,
      "dialogue_id": 2,
      "can_trade": true,
      "inventory": [2, 3, 10, 17, 18],
      "reaction_level": 15,
      "ai_behavior": "stationary"
    },
    {
      "id": 3,
      "name": "Holofox Pip",
      "description": "A curious holofox that trades secrets for treats.",
      "room_id": 13,
      "hardiness": 18,
      "agility": 24,
      "friendliness": "friendly",
      "courage": 40,
      "dialogue_id": 3,
      "can_trade": false,
      "gives_quests": [3],
      "reaction_level": 10,
      "special_abilities": ["hint"]
    },
    {
      "id": 4,
      "name": "Bronze Guardian",
      "description": "A sentinel forged to test puzzle-breakers.",
      "room_id": 14,
      "hardiness": 55,
      "agility": 12,
      "friendliness": "hostile",
      "courage": 80,
      "weapon_id": 0,
      "gold": 0,
      "reaction_level": -40,
      "special_abilities": ["shockwave", "reconfigure"],
      "ai_behavior": "aggressive",
      "drops_items_on_death": [16]
    },
    {
      "id": 5,
      "name": "Shadow Warden",
      "description": "A wraith bound to the dark gallery.",
      "room_id": 11,
      "hardiness": 35,
      "agility": 22,
      "friendliness": "hostile",
      "courage": 90,
      "gold": 0,
      "special_abilities": ["drain_light", "silence"],
      "ai_behavior": "aggressive",
      "drops_items_on_death": [11]
    },
    {
      "id": 6,
      "name": "River Serpent",
      "description": "A sleek serpent gliding through the flooded archive.",
      "room_id": 12,
      "hardiness": 45,
      "agility": 18,
      "friendliness": "hostile",
      "courage": 70,
      "gold": 0,
      "special_abilities": ["water_breath", "drag_down"],
      "ai_behavior": "aggressive",
      "drops_items_on_death": [14]
    },
    {
      "id": 7,
      "name": "Cipher Sphinx",
      "description": "A riddling sphinx who guards knowledge.",
      "room_id": 9,
      "hardiness": 50,
      "agility": 14,
      "friendliness": "neutral",
      "courage": 80,
      "dialogue_id": 4,
      "gives_quests": [2],
      "reaction_level": 0,
      "special_abilities": ["riddle_master"],
      "ai_behavior": "stationary"
    },
    {
      "id": 8,
      "name": "Scout Zira",
      "description": "A veteran scout who survived the deeper stacks.",
      "room_id": 1,
      "hardiness": 38,
      "agility": 20,
      "friendliness": "friendly",
      "courage": 75,
      "dialogue_id": 5,
      "gives_quests": [5],
      "reaction_level": 20,
      "special_abilities": ["companionship"],
      "ai_behavior": "stationary"
    },
    {
      "id": 9,
      "name": "Curator Prime",
      "description": "The Archive's final defender, a construct of code and crystal.",
      "room_id": 17,
      "hardiness": 95,
      "agility": 24,
      "friendliness": "hostile",
      "courage": 100,
      "weapon_id": 0,
      "gold": 0,
      "special_abilities": ["phase_step", "data_storm", "call_backup"],
      "ai_behavior": "aggressive",
      "drops_items_on_death": [15, 19]
    }
  ],
  "puzzles": [
    {
      "id": 1,
      "type": "locked_door",
      "room_id": 8,
      "description": "A sigil-locked vault door.",
      "exit_direction": "north",
      "required_item": 6,
      "success_message": "The key hums and the vault door slides open.",
      "failure_message": "The door rejects anything but the proper key.",
      "is_solved": false
    },
    {
      "id": 2,
      "type": "combination",
      "room_id": 10,
      "description": "A coded hatch with four glyph dials.",
      "exit_direction": "east",
      "combination": "7142",
      "success_message": "The hatch unlocks with a soft chime.",
      "failure_message": "The dials reset with a harsh buzz.",
      "attempts_allowed": -1
    },
    {
      "id": 3,
      "type": "riddle",
      "room_id": 9,
      "description": "The sphinx poses a riddle about light in darkness.",
      "riddle_question": "What walks without feet and shines without flame?",
      "riddle_answer": "memory",
      "success_message": "The sphinx purrs and steps aside.",
      "failure_message": "The sphinx remains unconvinced."
    },
    {
      "id": 4,
      "type": "hidden_object",
      "room_id": 7,
      "description": "A shimmer in the garden hides something solid.",
      "success_message": "The chime reveals a hidden cache among the glass trees.",
      "failure_message": "The shimmer disperses, revealing nothing yet.",
      "is_solved": false
    },
    {
      "id": 5,
      "type": "sequence",
      "room_id": 15,
      "description": "Four pedestals pulse in a repeating rhythm.",
      "exit_direction": "north",
      "combination": "LLRR",
      "success_message": "The forge stabilizes and a passage opens.",
      "failure_message": "The pulses desynchronize and reset."
    }
  ],
  "dialogues": [
    {
      "npc_id": 1,
      "greeting": "Welcome, seeker. The Archive remembers all steps taken within its halls.",
      "topics": [
        {"keyword": "help", "response": "Begin with light. Find a lantern in the workshop and brave the dark gallery.", "unlocks_quest": 1},
        {"keyword": "vault", "response": "The vault opens for those who carry the sigil key from the workshop."},
        {"keyword": "forge", "response": "Balance the pulses: left, left, right, right. Timing matters."}
      ],
      "farewell": "Walk with care; the Archive listens."
    },
    {
      "npc_id": 2,
      "greeting": "Need gear? Dex has you covered. Gold, barter, or a good story accepted!",
      "topics": [
        {"keyword": "trade", "response": "Browse my wares. Weapons, armor, tonicsâ€”priced fair."},
        {"keyword": "tip", "response": "Combination locks love prime numbers. The tablet in the rotunda hints at the order."}
      ],
      "farewell": "Spend wisely, travel lightly."
    },
    {
      "npc_id": 3,
      "greeting": "Yip! Looking for secrets? Bring me something sweet!",
      "topics": [
        {"keyword": "treat", "response": "Is that a holofox treat? Hand it over and I'll nudge a ladder for you.", "requires_item": 12, "gives_item": 18, "changes_reaction": 10, "one_time_only": true},
        {"keyword": "hint", "response": "The sequence in the forge? Start with left twice, then right twice."}
      ],
      "farewell": "Catch you among the stacks!"
    },
    {
      "npc_id": 4,
      "greeting": "Answer and advance. Fail and wait.",
      "topics": [
        {"keyword": "riddle", "response": "What walks without feet and shines without flame?", "unlocks_quest": 2},
        {"keyword": "answer", "response": "Say 'memory' if you understand."}
      ],
      "farewell": "The Archive favors the prepared."
    },
    {
      "npc_id": 5,
      "greeting": "Name's Zira. I've scouted the deep stacks and made it back.",
      "topics": [
        {"keyword": "warning", "response": "Curator Prime bends space. Keep moving, strike between pulses."},
        {"keyword": "goal", "response": "Recover the master codex fragment from the Orrery."}
      ],
      "farewell": "I'll meet you at the sanctum when you're ready."
    }
  ],
  "quests": [
    {
      "id": 1,
      "title": "Light the Path",
      "description": "Secure a light source and reach the Shadow Gallery.",
      "giver_npc": 1,
      "objectives": [
        {"type": "collect_item", "target_id": 1, "description": "Pick up the brass lantern."},
        {"type": "reach_room", "target_id": 11, "description": "Enter the Shadow Gallery with light."}
      ],
      "rewards_gold": 40,
      "rewards_experience": 60,
      "rewards_items": [10]
    },
    {
      "id": 2,
      "title": "Unlock the Vault",
      "description": "Acquire the vault key and open the antechamber door.",
      "giver_npc": 4,
      "objectives": [
        {"type": "collect_item", "target_id": 6, "description": "Find the vault key."},
        {"type": "reach_room", "target_id": 14, "description": "Pass through the vault door."}
      ],
      "rewards_gold": 80,
      "rewards_experience": 120,
      "rewards_items": [14]
    },
    {
      "id": 3,
      "title": "Bridge the Stacks",
      "description": "Earn the holofox's trust and align the ladders.",
      "giver_npc": 3,
      "objectives": [
        {"type": "talk_to_npc", "target_id": 3, "description": "Give the holofox a treat."},
        {"type": "reach_room", "target_id": 16, "description": "Climb into the Infinite Stacks."}
      ],
      "rewards_gold": 50,
      "rewards_experience": 100,
      "rewards_items": [18]
    },
    {
      "id": 4,
      "title": "Claim the Forge",
      "description": "Defeat the guardian and recover its badge and shard.",
      "giver_npc": 8,
      "objectives": [
        {"type": "kill_monster", "target_id": 4, "description": "Defeat the Bronze Guardian."},
        {"type": "collect_item", "target_id": 16, "description": "Take the guardian badge."},
        {"type": "collect_item", "target_id": 13, "description": "Recover the memory shard."}
      ],
      "rewards_gold": 120,
      "rewards_experience": 160,
      "rewards_items": [17]
    },
    {
      "id": 5,
      "title": "Master Codex",
      "description": "Reach the Orrery and retrieve the codex fragment.",
      "giver_npc": 8,
      "objectives": [
        {"type": "reach_room", "target_id": 18, "description": "Enter the Orrery of Endings."},
        {"type": "collect_item", "target_id": 15, "description": "Claim the codex fragment."},
        {"type": "kill_monster", "target_id": 9, "description": "Defeat Curator Prime."}
      ],
      "rewards_gold": 200,
      "rewards_experience": 260,
      "rewards_items": []
    }
  ]
}
